<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>极简打卡 - SimpleList</title>

    <!-- 引入 HarmonyOS Sans 字体 -->
    <link rel="stylesheet" href="styles.css">

    <style>
        /* 使用系统字体栈，确保良好的兼容性和可读性 */
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            line-height: 1.5;
        }
    </style>
</head>

<body>
    <div class="app">
        <!-- 头部 -->
        <header class="header">
            <h1 class="app-title" data-i18n="app_title">极简打卡</h1>
            <button class="add-goal-btn" id="addGoalBtn" data-i18n="add_goal_btn">+ 添加目标</button>
        </header>

        <!-- 语言文件 -->
        <script src="languages.js"></script>

        <!-- 主内容区 -->
        <main class="main-content">
            <!-- 目标列表 -->
            <div class="goals-container" id="goalsContainer">
                <!-- 目标卡片将动态插入这里 -->
            </div>

            <!-- 空状态提示 -->
            <div class="empty-state" id="emptyState">
                <div class="empty-icon" data-i18n="empty_icon">📝</div>
                <p data-i18n="empty_title">还没有创建任何目标</p>
                <p data-i18n="empty_desc">点击上方按钮开始你的第一个目标吧！</p>
            </div>
        </main>

        <!-- 底部导航 -->
        <nav class="bottom-nav">
            <button class="nav-btn" id="featuresBtn">
                <span class="nav-icon">⚙️</span>
                <span class="nav-text" data-i18n="nav_features">功能</span>
            </button>
            <button class="nav-btn" id="settingsBtn">
                <span class="nav-icon">🔧</span>
                <span class="nav-text" data-i18n="nav_settings">设置</span>
            </button>
        </nav>

        <!-- 添加目标模态框 -->
        <div class="modal" id="addGoalModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 data-i18n="create_goal_title">创建新目标</h2>
                    <button class="close-btn" id="closeModal">&times;</button>
                </div>
                <form class="goal-form" id="goalForm">
                    <div class="form-group">
                        <label for="goalName" data-i18n="goal_name_label">目标名称</label>
                        <input type="text" id="goalName" data-i18n-placeholder="goal_name_placeholder" placeholder="例如：喝水" maxlength="10" required>
                        <div class="char-counter" id="goalNameCounter">0/10</div>
                    </div>
                    <div class="form-group">
                        <label for="targetCount" data-i18n="target_count_label">每日目标次数</label>
                        <input type="number" id="targetCount" min="1" max="100" placeholder="请输入目标次数" required>
                    </div>
                    <div class="form-group">
                        <label for="startDate" data-i18n="start_date_label">开始日期</label>
                        <input type="date" id="startDate" placeholder="yyyy/mm/dd" required>
                    </div>
                    <div class="form-group">
                        <label for="endDate" data-i18n="end_date_label">结束日期（可选）</label>
                        <input type="date" id="endDate" placeholder="yyyy/mm/dd">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancelBtn" data-i18n="cancel_btn">取消</button>
                        <button type="submit" class="btn-primary" data-i18n="create_goal_btn">创建目标</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- 功能菜单 -->
        <div class="modal" id="featuresModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 data-i18n="features_title">功能</h2>
                    <button class="close-btn" id="closeFeaturesModal">&times;</button>
                </div>
                <div class="menu-list">
                    <button class="menu-item" id="recordsBtn">
                        <span class="menu-icon">📊</span>
                        <span class="menu-text" data-i18n="records_menu">打卡记录</span>
                    </button>
                    <button class="menu-item" id="manageGoalsBtn">
                        <span class="menu-icon">🎯</span>
                        <span class="menu-text" data-i18n="manage_goals_menu">目标管理</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- 设置模态框 -->
        <div class="modal" id="settingsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 data-i18n="settings_title">设置</h2>
                    <button class="close-btn" id="closeSettingsModal">&times;</button>
                </div>
                <div class="settings-list">
                    <div class="setting-item">
                        <label for="themeSelect" data-i18n="theme_label">主题</label>
                        <select id="themeSelect">
                            <option value="auto" data-i18n="theme_auto">自动检测</option>
                            <option value="light" data-i18n="theme_light">浅色模式</option>
                            <option value="dark" data-i18n="theme_dark">深色模式</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="languageSelect" data-i18n="language_label">语言</label>
                        <select id="languageSelect">
                            <option value="zh-CN">简体中文</option>
                            <option value="zh-TW">繁體中文</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                    <div class="setting-item about-software">
                        <label data-i18n="about_software">关于软件</label>
                        <button class="btn-small btn-about" id="aboutSoftwareBtn" data-i18n="view_details">查看详情</button>
                    </div>

                    <!-- 数据导出/导入功能 -->
                    <div class="setting-item data-management">
                        <label data-i18n="data_management">数据管理</label>
                        <div class="data-actions">
                            <button class="btn-small btn-export" id="exportDataBtn" data-i18n="export_data">导出数据</button>
                            <button class="btn-small btn-import" id="importDataBtn" data-i18n="import_data">导入数据</button>
                            <input type="file" id="importFileInput" accept=".json" style="display: none;">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 日历视图 -->
        <div class="modal" id="calendarModal">
            <div class="modal-content large">
                <div class="modal-header">
                    <h2 id="calendarTitle" data-i18n="calendar_title">目标日历</h2>
                    <button class="close-btn" id="closeCalendarModal">&times;</button>
                </div>
                <div class="calendar-container" id="calendarContainer">
                    <!-- 日历将动态生成 -->
                </div>
            </div>
        </div>

        <!-- 打卡记录 -->
        <div class="modal" id="recordsModal">
            <div class="modal-content large">
                <div class="modal-header">
                    <h2 data-i18n="records_title">打卡记录</h2>
                    <button class="close-btn" id="closeRecordsModal">&times;</button>
                </div>
                <div class="records-content">
                    <!-- 最近一周日期列表 -->
                    <div class="week-date-list" id="weekDateList">
                        <!-- 日期列表将动态生成 -->
                    </div>
                    <!-- 对应日期的打卡记录内容 -->
                    <div class="records-container" id="recordsContainer">
                        <!-- 记录将动态生成 -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 目标管理 -->
        <div class="modal" id="manageGoalsModal">
            <div class="modal-content large">
                <div class="modal-header">
                    <h2 data-i18n="manage_goals_title">目标管理</h2>
                    <button class="close-btn" id="closeManageGoalsModal">&times;</button>
                </div>
                <div class="manage-goals-container" id="manageGoalsContainer">
                    <!-- 目标列表将动态生成 -->
                </div>
            </div>
        </div>

        <!-- 提示消息 -->
        <div class="toast" id="toast"></div>
    </div>

    <!-- 编辑目标模态框 -->
    <div class="modal" id="editGoalModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-i18n="edit_goal_title">编辑目标</h2>
                <button class="close-btn" id="closeEditModal">&times;</button>
            </div>
            <form class="goal-form" id="editGoalForm">
                <div class="form-group">
                    <label for="editGoalName" data-i18n="goal_name_label">目标名称</label>
                    <input type="text" id="editGoalName" maxlength="10" required>
                    <div class="char-counter" id="editGoalNameCounter">0/10</div>
                </div>
                <div class="form-group">
                    <label for="editTargetCount" data-i18n="target_count_label">每日目标次数</label>
                    <input type="number" id="editTargetCount" min="1" max="100" placeholder="请输入目标次数" required>
                </div>
                <div class="form-group">
                    <label for="editStartDate" data-i18n="start_date_label">开始日期</label>
                    <input type="date" id="editStartDate" placeholder="yyyy/mm/dd" required>
                </div>
                <div class="form-group">
                    <label for="editEndDate" data-i18n="end_date_label">结束日期（可选）</label>
                    <input type="date" id="editEndDate" placeholder="yyyy/mm/dd">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancelEditBtn" data-i18n="cancel_btn">取消</button>
                    <button type="submit" class="btn-primary" data-i18n="save_changes_btn">保存修改</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 删除确认对话框 -->
    <div class="modal" id="deleteConfirmModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-i18n="delete_confirm_title">确认删除</h2>
                <button class="close-btn" id="closeDeleteConfirmModal">&times;</button>
            </div>
            <div class="delete-confirm-content">
                <div class="delete-warning-icon">⚠️</div>
                <h3 data-i18n="delete_confirm_question">确定要删除这个目标吗？</h3>
                <p id="deleteGoalName"></p>
                <p class="delete-warning-text" data-i18n="delete_warning_text">注意：删除后该目标的所有打卡记录也会被删除，此操作不可恢复。</p>
            </div>
            <div class="form-actions">
                <button type="button" class="btn-secondary" id="cancelDeleteBtn" data-i18n="cancel_btn">取消</button>
                <button type="button" class="btn-delete" id="confirmDeleteBtn" data-i18n="confirm_delete_btn">删除</button>
            </div>
        </div>
    </div>

    <!-- 分享目标模态框 -->
    <div class="modal" id="shareGoalModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-i18n="share_goal">分享目标</h2>
                <button class="close-btn" id="closeShareGoalModal">&times;</button>
            </div>
            <div class="share-content">
                <canvas id="shareCanvas" style="max-width: 100%; height: auto; border-radius: 8px;"></canvas>
                <div class="form-actions" style="margin-top: 16px;">
                    <button type="button" class="btn-secondary" id="cancelShareBtn" data-i18n="cancel_btn">取消</button>
                    <button type="button" class="btn-primary" id="saveShareImageBtn" data-i18n="save_image_btn">保存图片</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 关于软件模态框 -->
    <div class="modal" id="aboutSoftwareModal">
        <div class="modal-content about-modal">
            <div class="modal-header">
                <h2 data-i18n="about_software_title">关于软件</h2>
                <button class="close-btn" id="closeAboutSoftwareModal">&times;</button>
            </div>
            <div class="about-content">
                <!-- 基本信息卡片 -->
                <div class="about-card">
                    <div class="about-section">
                        <h3 data-i18n="software_version">软件版本</h3>
                        <p class="version-number">0.0.1</p>
                    </div>
                    <div class="about-section">
                        <h3 data-i18n="author">作者</h3>
                        <p class="author-name">Darling_ATRI</p>
                    </div>
                </div>

                <!-- 声明卡片 -->
                <div class="about-card">
                    <div class="about-section">
                        <h3 data-i18n="declaration">声明</h3>
                        <p class="declaration-text" data-i18n="declaration_text">该软件为Darling_ATRI开发，永久免费开源，请勿倒卖</p>
                    </div>
                </div>

                <!-- 下载信息卡片 -->
                <div class="about-card">
                    <div class="about-section">
                        <h3 data-i18n="download_address">下载地址</h3>
                        <a href="https://github.com/DarlingATRI433/SimpleList" target="_blank" class="download-link" data-i18n="download_link_text">点我去官网</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 日历视图 -->
    <div class="modal" id="calendarModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h2 id="calendarTitle">目标日历</h2>
                <button class="close-btn" id="closeCalendarModal">&times;</button>
            </div>
            <div class="calendar-container" id="calendarContainer">
                <!-- 日历将动态生成 -->
            </div>
        </div>
    </div>

    <!-- 打卡记录 -->
    <div class="modal" id="recordsModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h2>打卡记录</h2>
                <button class="close-btn" id="closeRecordsModal">&times;</button>
            </div>
            <div class="records-container" id="recordsContainer">
                <!-- 记录将动态生成 -->
            </div>
        </div>
    </div>

    <!-- 目标管理 -->
    <div class="modal" id="manageGoalsModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h2>目标管理</h2>
                <button class="close-btn" id="closeManageGoalsModal">&times;</button>
            </div>
            <div class="manage-goals-container" id="manageGoalsContainer">
                <!-- 目标列表将动态生成 -->
            </div>
        </div>
    </div>

    <!-- 提示消息 -->
    <div class="toast" id="toast"></div>
    </div>

    <script src="main.js"></script>
</body>

</html>